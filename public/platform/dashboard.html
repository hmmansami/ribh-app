<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | Ø±ÙØ¨Ø­</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/platform/shared/shell.css">
</head>
<body>

<div id="page-content">
    <!-- KPI Cards -->
    <div class="kpi-grid" id="kpiGrid">
        <div class="kpi-card">
            <div class="kpi-label">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¯Ø©</div>
            <div class="kpi-value text-success" id="kpiRevenue">0 Ø±.Ø³</div>
            <div class="kpi-change up">â†‘ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-label">Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†</div>
            <div class="kpi-value" id="kpiSubscribers">0</div>
            <div class="kpi-change up">â†‘ Ø¬Ø¯Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-label">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©</div>
            <div class="kpi-value" id="kpiMessages">0</div>
            <div class="kpi-change up">Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯</div>
            <div class="kpi-value text-primary" id="kpiRecovery">0%</div>
            <div class="kpi-change up">â†‘ Ù…ØªÙˆØ³Ø·</div>
        </div>
    </div>

    <!-- Main Grid -->
    <div class="grid-2">
        <!-- Active Journeys -->
        <div class="card">
            <div class="card-header">
                <div>
                    <div class="card-title">Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</div>
                    <div class="card-subtitle">Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù„ÙŠ ØªØ´ØªØºÙ„ Ø§Ù„Ø­ÙŠÙ†</div>
                </div>
                <a href="/platform/journeys.html" class="btn btn-ghost btn-sm">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a>
            </div>

            <div id="activeJourneys">
                <div class="journey-item">
                    <div class="journey-icon" style="background: var(--warning-subtle); color: var(--warning);">ğŸ›’</div>
                    <div class="journey-info">
                        <div class="journey-name">Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø³Ù„Ø§Øª</div>
                        <div class="journey-stat">3 Ø®Ø·ÙˆØ§Øª Â· ÙˆØ§ØªØ³Ø§Ø¨ + SMS</div>
                    </div>
                    <span class="badge badge-success">Ù†Ø´Ø·</span>
                </div>
                <div class="journey-item">
                    <div class="journey-icon" style="background: var(--info-subtle); color: var(--info);">ğŸ‘‹</div>
                    <div class="journey-info">
                        <div class="journey-name">Ø±Ø­Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨</div>
                        <div class="journey-stat">3 Ø®Ø·ÙˆØ§Øª Â· ÙˆØ§ØªØ³Ø§Ø¨ + SMS</div>
                    </div>
                    <span class="badge badge-success">Ù†Ø´Ø·</span>
                </div>
                <div class="journey-item">
                    <div class="journey-icon" style="background: var(--success-subtle); color: var(--success);">ğŸ“¦</div>
                    <div class="journey-info">
                        <div class="journey-name">Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡</div>
                        <div class="journey-stat">3 Ø®Ø·ÙˆØ§Øª Â· ÙˆØ§ØªØ³Ø§Ø¨</div>
                    </div>
                    <span class="badge badge-success">Ù†Ø´Ø·</span>
                </div>
                <div class="journey-item">
                    <div class="journey-icon" style="background: var(--danger-subtle); color: var(--danger);">ğŸ’”</div>
                    <div class="journey-info">
                        <div class="journey-name">Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„ØºØ§Ø¦Ø¨ÙŠÙ†</div>
                        <div class="journey-stat">3 Ø®Ø·ÙˆØ§Øª Â· ÙˆØ§ØªØ³Ø§Ø¨ + SMS</div>
                    </div>
                    <span class="badge badge-warning">Ù…Ø³ÙˆØ¯Ø©</span>
                </div>
                <div class="journey-item">
                    <div class="journey-icon" style="background: var(--primary-subtle); color: var(--primary);">ğŸ‚</div>
                    <div class="journey-info">
                        <div class="journey-name">ØªÙ‡Ù†Ø¦Ø© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯</div>
                        <div class="journey-stat">2 Ø®Ø·ÙˆØ§Øª Â· ÙˆØ§ØªØ³Ø§Ø¨ + SMS</div>
                    </div>
                    <span class="badge badge-warning">Ù…Ø³ÙˆØ¯Ø©</span>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="card">
            <div class="card-header">
                <div>
                    <div class="card-title">Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£Ø®ÙŠØ±</div>
                    <div class="card-subtitle">Ø¢Ø®Ø± Ø§Ù„Ø£Ø­Ø¯Ø§Ø«</div>
                </div>
            </div>

            <div id="activityFeed">
                <div class="activity-item">
                    <div class="activity-dot" style="background: var(--success);"></div>
                    <div class="activity-content">
                        <div class="activity-text">Ù†ÙˆØ±Ø© Ø§Ø³ØªØ±Ø¯Øª Ø³Ù„ØªÙ‡Ø§ â€” <strong>350 Ø±.Ø³</strong></div>
                        <div class="activity-time">Ù‚Ø¨Ù„ 5 Ø¯Ù‚Ø§Ø¦Ù‚</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-dot" style="background: var(--primary);"></div>
                    <div class="activity-content">
                        <div class="activity-text">Ù…Ø´ØªØ±Ùƒ Ø¬Ø¯ÙŠØ¯ Ø¹Ø¨Ø± QR â€” <strong>+966 50 XXX</strong></div>
                        <div class="activity-time">Ù‚Ø¨Ù„ 12 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-dot" style="background: var(--info);"></div>
                    <div class="activity-content">
                        <div class="activity-text">Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø£ÙØ±Ø³Ù„Øª Ù„Ù€ <strong>Ø£Ø­Ù…Ø¯</strong></div>
                        <div class="activity-time">Ù‚Ø¨Ù„ 18 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-dot" style="background: var(--success);"></div>
                    <div class="activity-content">
                        <div class="activity-text">Ù…Ø­Ù…Ø¯ Ø§Ø´ØªØ±Ù‰ Ø¨Ø¹Ø¯ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© â€” <strong>520 Ø±.Ø³</strong></div>
                        <div class="activity-time">Ù‚Ø¨Ù„ 35 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-dot" style="background: var(--warning);"></div>
                    <div class="activity-content">
                        <div class="activity-text">Ø³Ù„Ø© Ù…ØªØ±ÙˆÙƒØ© Ø¬Ø¯ÙŠØ¯Ø© â€” <strong>780 Ø±.Ø³</strong></div>
                        <div class="activity-time">Ù‚Ø¨Ù„ Ø³Ø§Ø¹Ø©</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="card mt-24">
        <div class="card-header">
            <div class="card-title">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</div>
        </div>
        <div class="quick-actions">
            <a href="/platform/journeys.html" class="quick-action">
                <div class="quick-action-icon">âœ¦</div>
                <div class="quick-action-text">
                    <div class="quick-action-title">Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø­Ù„Ø©</div>
                    <div class="quick-action-desc">Ø±Ø­Ù„Ø© Ø¹Ù…Ù„Ø§Ø¡ Ø¬Ø¯ÙŠØ¯Ø©</div>
                </div>
            </a>
            <a href="/platform/campaigns.html" class="quick-action">
                <div class="quick-action-icon">ğŸ“¢</div>
                <div class="quick-action-text">
                    <div class="quick-action-title">Ø­Ù…Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</div>
                    <div class="quick-action-desc">Ø±Ø³Ø§Ù„Ø© Ù„Ø´Ø±ÙŠØ­Ø© Ù…Ø¹ÙŠÙ†Ø©</div>
                </div>
            </a>
            <a href="/platform/signup-tools.html" class="quick-action">
                <div class="quick-action-icon">ğŸ“±</div>
                <div class="quick-action-text">
                    <div class="quick-action-title">Ø¥Ù†Ø´Ø§Ø¡ QR</div>
                    <div class="quick-action-desc">ÙƒÙˆØ¯ QR Ù„Ù…Ø­Ù„Ùƒ</div>
                </div>
            </a>
            <a href="/platform/analytics.html" class="quick-action">
                <div class="quick-action-icon">ğŸ“Š</div>
                <div class="quick-action-text">
                    <div class="quick-action-title">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
                    <div class="quick-action-desc">Ø´ÙˆÙ Ø§Ù„Ø£Ø¯Ø§Ø¡</div>
                </div>
            </a>
        </div>
    </div>
</div>

<style>
    /* Dashboard-specific styles */
    .journey-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 0;
        border-bottom: 1px solid var(--border);
    }
    .journey-item:last-child { border-bottom: none; }
    .journey-icon {
        width: 40px;
        height: 40px;
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        flex-shrink: 0;
    }
    .journey-info { flex: 1; }
    .journey-name { font-size: 14px; font-weight: 600; }
    .journey-stat { font-size: 12px; color: var(--text-dim); margin-top: 2px; }

    .activity-item {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 12px 0;
        border-bottom: 1px solid var(--border);
    }
    .activity-item:last-child { border-bottom: none; }
    .activity-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        margin-top: 6px;
        flex-shrink: 0;
    }
    .activity-content { flex: 1; }
    .activity-text { font-size: 14px; color: var(--text-secondary); }
    .activity-time { font-size: 12px; color: var(--text-faint); margin-top: 2px; }

    .quick-actions {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
    }
    .quick-action {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 16px;
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius-md);
        transition: all 0.2s;
        text-decoration: none;
        color: inherit;
    }
    .quick-action:hover {
        border-color: var(--border-active);
        transform: translateY(-2px);
    }
    .quick-action-icon {
        width: 40px;
        height: 40px;
        background: var(--primary-subtle);
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        flex-shrink: 0;
    }
    .quick-action-title { font-size: 14px; font-weight: 600; }
    .quick-action-desc { font-size: 12px; color: var(--text-dim); margin-top: 2px; }

    @media (max-width: 768px) {
        .quick-actions { grid-template-columns: 1fr 1fr; }
    }
    @media (max-width: 480px) {
        .quick-actions { grid-template-columns: 1fr; }
    }
</style>

<script src="/platform/shared/shell.js"></script>
<script>
    // Load real data from API
    document.addEventListener('DOMContentLoaded', function() {
        // Try loading stats
        RibhShell.api('/api/stats').then(function(data) {
            if (!data) return;
            document.getElementById('kpiRevenue').textContent = RibhShell.formatSAR(data.recoveredRevenue || 0);
            document.getElementById('kpiSubscribers').textContent = RibhShell.formatNumber(data.totalSubscribers || 0);
            document.getElementById('kpiMessages').textContent = RibhShell.formatNumber(data.messagesSent || 0);
            document.getElementById('kpiRecovery').textContent = (data.recoveryRate || 0) + '%';
        }).catch(function() {
            // Use placeholder data if API fails
        });
    });
</script>

</body>
</html>
