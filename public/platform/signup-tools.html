<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ | Ø±ÙØ¨Ø­</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/platform/shared/shell.css">
</head>
<body>

<div id="page-content">
    <div class="page-header">
        <h1 class="page-title">Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</h1>
        <p class="page-subtitle">Ø§Ø¬Ù…Ø¹ Ù…Ø´ØªØ±ÙƒÙŠÙ† Ù…Ù† ÙƒÙ„ Ù…ÙƒØ§Ù† â€” Ù…ØªØ¬Ø±ÙƒØŒ Ù…Ø­Ù„ÙƒØŒ Ø³ÙˆØ´Ø§Ù„ Ù…ÙŠØ¯ÙŠØ§</p>
    </div>

    <!-- Tools Grid -->
    <div class="tools-grid">

        <!-- QR Code Generator -->
        <div class="tool-card featured">
            <div class="tool-card-badge">Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Ù‹</div>
            <div class="tool-icon-lg">ğŸ“±</div>
            <h3>ÙƒÙˆØ¯ QR Ù„Ù„Ù…Ø­Ù„Ø§Øª</h3>
            <p>Ø§Ø·Ø¨Ø¹ ÙƒÙˆØ¯ QR Ø¹Ù„Ù‰ Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŒ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©ØŒ Ø£Ùˆ Ø§Ù„ÙƒØ§ÙˆÙ†ØªØ±. Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠÙ…Ø³Ø­Ù‡ ÙˆÙŠØ´ØªØ±Ùƒ Ø¨Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙÙˆØ±Ø§Ù‹.</p>

            <div class="qr-generator" id="qrGenerator">
                <div class="input-group">
                    <label class="input-label">Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…ØªØ¬Ø±</label>
                    <input type="tel" class="input" id="qrPhone" placeholder="966501234567" dir="ltr">
                </div>
                <button class="btn btn-primary w-full" onclick="generateQR()">Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ QR</button>

                <div class="qr-result" id="qrResult" style="display: none;">
                    <div class="qr-preview" id="qrPreview"></div>
                    <div class="qr-actions">
                        <button class="btn btn-secondary btn-sm" onclick="downloadQR('png')">ØªØ­Ù…ÙŠÙ„ PNG</button>
                        <button class="btn btn-secondary btn-sm" onclick="downloadQR('svg')">ØªØ­Ù…ÙŠÙ„ SVG</button>
                        <button class="btn btn-ghost btn-sm" onclick="printQR()">Ø·Ø¨Ø§Ø¹Ø©</button>
                    </div>
                </div>
            </div>

            <div class="tool-stats mt-16">
                <div class="tool-stat">
                    <div class="tool-stat-value" id="qrSubscribers">0</div>
                    <div class="tool-stat-label">Ù…Ø´ØªØ±Ùƒ Ø¹Ø¨Ø± QR</div>
                </div>
                <div class="tool-stat">
                    <div class="tool-stat-value" id="qrScans">0</div>
                    <div class="tool-stat-label">Ù…Ø³Ø­ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</div>
                </div>
            </div>
        </div>

        <!-- WhatsApp Widget -->
        <div class="tool-card">
            <div class="tool-icon-lg">ğŸ’¬</div>
            <h3>ÙˆÙŠØ¯Ø¬Øª ÙˆØ§ØªØ³Ø§Ø¨ (Ù„Ù„Ù…ØªØ¬Ø±)</h3>
            <p>Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ø°ÙƒÙŠØ© Ø¹Ù„Ù‰ Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ â€” ØªØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ù†ÙŠØ© Ø§Ù„Ø®Ø±ÙˆØ¬ ÙˆØªØ¬Ù…Ø¹ Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ÙˆØ§ØªØ³Ø§Ø¨.</p>

            <div class="widget-preview">
                <div class="widget-mockup">
                    <div class="widget-bubble">
                        <div class="widget-bubble-text">Ø§Ø´ØªØ±Ùƒ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰<br><strong>Ø®ØµÙ… 10%</strong> ğŸ</div>
                        <div class="widget-bubble-input">
                            <span class="widget-phone-icon">ğŸ“±</span>
                            <span class="widget-phone-text">Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</span>
                        </div>
                        <div class="widget-bubble-btn">Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø­ÙŠÙ†</div>
                    </div>
                </div>
            </div>

            <div class="input-group mt-16">
                <label class="input-label">Ù†Øµ Ø§Ù„Ø¹Ø±Ø¶</label>
                <input type="text" class="input" value="Ø§Ø´ØªØ±Ùƒ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø®ØµÙ… 10% ğŸ">
            </div>
            <div class="input-group">
                <label class="input-label">ÙˆÙ‚Øª Ø§Ù„Ø¸Ù‡ÙˆØ±</label>
                <select class="input">
                    <option>Ø¹Ù†Ø¯ Ù†ÙŠØ© Ø§Ù„Ø®Ø±ÙˆØ¬</option>
                    <option>Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†Ù</option>
                    <option>Ø¨Ø¹Ø¯ 50% ØªÙ…Ø±ÙŠØ±</option>
                </select>
            </div>

            <div class="code-block mt-16">
                <div class="code-label">ÙƒÙˆØ¯ Ø§Ù„ØªØ¶Ù…ÙŠÙ†:</div>
                <code class="code-text">&lt;script src="https://ribh-484706.web.app/widget/optin.js" data-store="YOUR_ID"&gt;&lt;/script&gt;</code>
                <button class="btn btn-ghost btn-sm" onclick="copyCode()">Ù†Ø³Ø®</button>
            </div>
        </div>

        <!-- Social Media Link -->
        <div class="tool-card">
            <div class="tool-icon-lg">ğŸ“²</div>
            <h3>Ø±Ø§Ø¨Ø· Ø³ÙˆØ´Ø§Ù„ Ù…ÙŠØ¯ÙŠØ§</h3>
            <p>Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ø§Ø´ØªØ±Ø§Ùƒ â€” Ø¶Ø¹Ù‡ ÙÙŠ Ø¨ÙŠÙˆ Ø§Ù†Ø³ØªØºØ±Ø§Ù…ØŒ ØªÙˆÙŠØªØ±ØŒ Ø£Ùˆ Ø£ÙŠ Ù…ÙƒØ§Ù†.</p>

            <div class="link-generator mt-16">
                <div class="input-group">
                    <label class="input-label">Ø±Ø§Ø¨Ø· Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</label>
                    <div class="input-with-copy">
                        <input type="text" class="input" id="socialLink" value="https://wa.me/966501234567?text=Ø§Ø´ØªØ±Ø§Ùƒ" readonly dir="ltr">
                        <button class="btn btn-ghost btn-sm" onclick="copySocialLink()">Ù†Ø³Ø®</button>
                    </div>
                </div>
            </div>

            <div class="tool-stats mt-16">
                <div class="tool-stat">
                    <div class="tool-stat-value">0</div>
                    <div class="tool-stat-label">Ù…Ø´ØªØ±Ùƒ Ø¹Ø¨Ø± Ø§Ù„Ø³ÙˆØ´Ø§Ù„</div>
                </div>
            </div>
        </div>

        <!-- CSV Import -->
        <div class="tool-card">
            <div class="tool-icon-lg">ğŸ“‹</div>
            <h3>Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Ù…Ù„Ù</h3>
            <p>Ø§Ø³ØªÙˆØ±Ø¯ Ø¹Ù…Ù„Ø§Ø¦Ùƒ Ù…Ù† Ù…Ù„Ù CSV Ø£Ùˆ Excel â€” Ø£Ø±Ù‚Ø§Ù… Ù‡ÙˆØ§ØªÙ ÙˆØ£Ø³Ù…Ø§Ø¡.</p>

            <div class="upload-zone mt-16" id="uploadZone">
                <div class="upload-icon">ğŸ“</div>
                <div class="upload-text">Ø§Ø³Ø­Ø¨ Ù…Ù„Ù CSV Ù‡Ù†Ø§</div>
                <div class="upload-subtext">Ø£Ùˆ Ø§Ø¶ØºØ· Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù</div>
                <input type="file" accept=".csv,.xlsx" id="fileInput" style="display: none;">
            </div>

            <div class="mt-8 text-sm text-dim">
                ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ù…Ù„Ù Ø¹Ù„Ù‰ Ø¹Ù…ÙˆØ¯ "phone" Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„. Ø£Ø¹Ù…Ø¯Ø© Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©: name, email, birthday
            </div>
        </div>
    </div>
</div>

<style>
    .tools-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    .tool-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius-lg);
        padding: 28px;
        position: relative;
    }
    .tool-card.featured {
        border-color: var(--border-active);
    }
    .tool-card-badge {
        position: absolute;
        top: 16px;
        left: 16px;
        background: var(--primary-subtle);
        color: var(--primary);
        font-size: 11px;
        font-weight: 600;
        padding: 3px 10px;
        border-radius: 20px;
    }

    .tool-icon-lg { font-size: 36px; margin-bottom: 16px; }
    .tool-card h3 { font-size: 18px; font-weight: 700; margin-bottom: 8px; }
    .tool-card p { font-size: 14px; color: var(--text-dim); line-height: 1.6; margin-bottom: 16px; }

    .tool-stats { display: flex; gap: 24px; }
    .tool-stat { text-align: center; }
    .tool-stat-value { font-size: 20px; font-weight: 800; color: var(--primary); }
    .tool-stat-label { font-size: 12px; color: var(--text-faint); }

    .qr-result { text-align: center; margin-top: 20px; }
    .qr-preview {
        width: 200px;
        height: 200px;
        margin: 0 auto 16px;
        background: #fff;
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .qr-preview img { width: 180px; height: 180px; }
    .qr-actions { display: flex; gap: 8px; justify-content: center; }

    .widget-preview { margin-bottom: 16px; }
    .widget-mockup {
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius-md);
        padding: 20px;
        display: flex;
        justify-content: center;
    }
    .widget-bubble {
        background: var(--bg-card);
        border: 1px solid var(--border-active);
        border-radius: var(--radius-lg);
        padding: 20px;
        width: 240px;
        text-align: center;
    }
    .widget-bubble-text { font-size: 14px; margin-bottom: 12px; line-height: 1.6; }
    .widget-bubble-input {
        background: var(--bg-input);
        border: 1px solid var(--border);
        border-radius: var(--radius-sm);
        padding: 8px 12px;
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 10px;
    }
    .widget-phone-text { font-size: 13px; color: var(--text-faint); }
    .widget-bubble-btn {
        background: linear-gradient(135deg, #FBBF24, #F59E0B);
        color: #0a0a0a;
        padding: 8px;
        border-radius: var(--radius-sm);
        font-size: 13px;
        font-weight: 700;
    }

    .code-block {
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius-sm);
        padding: 12px;
    }
    .code-label { font-size: 12px; color: var(--text-dim); margin-bottom: 6px; }
    .code-text {
        display: block;
        font-size: 12px;
        color: var(--primary);
        word-break: break-all;
        margin-bottom: 8px;
        font-family: monospace;
        direction: ltr;
        text-align: left;
    }

    .input-with-copy { display: flex; gap: 8px; }
    .input-with-copy .input { flex: 1; }

    .upload-zone {
        border: 2px dashed var(--border);
        border-radius: var(--radius-md);
        padding: 32px;
        text-align: center;
        cursor: pointer;
        transition: border-color 0.2s;
    }
    .upload-zone:hover { border-color: var(--border-active); }
    .upload-icon { font-size: 32px; margin-bottom: 8px; }
    .upload-text { font-size: 14px; font-weight: 600; }
    .upload-subtext { font-size: 13px; color: var(--text-dim); margin-top: 4px; }

    @media (max-width: 768px) {
        .tools-grid { grid-template-columns: 1fr; }
    }
</style>

<script src="/platform/shared/shell.js"></script>
<script>
    function generateQR() {
        var phone = document.getElementById('qrPhone').value.replace(/\s/g, '');
        if (!phone) { alert('Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨'); return; }

        RibhShell.api('/api/qr/generate', {
            method: 'POST',
            body: { phone: phone }
        }).then(function(data) {
            if (data && data.qrDataUrl) {
                document.getElementById('qrResult').style.display = '';
                document.getElementById('qrPreview').innerHTML = '<img src="' + data.qrDataUrl + '" alt="QR Code">';
            }
        }).catch(function() {
            // Generate a placeholder
            document.getElementById('qrResult').style.display = '';
            document.getElementById('qrPreview').innerHTML = '<div style="padding:20px;color:#0a0a0a;font-size:12px;">wa.me/' + phone + '?text=Ø§Ø´ØªØ±Ø§Ùƒ</div>';
        });
    }

    function downloadQR(format) { alert('ØªØ­Ù…ÙŠÙ„ ' + format + ' â€” Ù‚Ø±ÙŠØ¨Ø§Ù‹'); }
    function printQR() { window.print(); }

    function copyCode() {
        var code = document.querySelector('.code-text').textContent;
        navigator.clipboard.writeText(code).then(function() { alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®!'); });
    }

    function copySocialLink() {
        var link = document.getElementById('socialLink').value;
        navigator.clipboard.writeText(link).then(function() { alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®!'); });
    }

    // Upload zone
    var uploadZone = document.getElementById('uploadZone');
    var fileInput = document.getElementById('fileInput');
    if (uploadZone) {
        uploadZone.addEventListener('click', function() { fileInput.click(); });
        fileInput.addEventListener('change', function(e) {
            if (e.target.files.length) {
                alert('Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ ' + e.target.files[0].name + '...');
            }
        });
    }

    // Load QR stats
    document.addEventListener('DOMContentLoaded', function() {
        RibhShell.api('/api/subscribers/stats').then(function(data) {
            if (data) {
                if (data.qrSubscribers) document.getElementById('qrSubscribers').textContent = data.qrSubscribers;
                if (data.qrScans) document.getElementById('qrScans').textContent = data.qrScans;
            }
        }).catch(function() {});
    });
</script>

</body>
</html>
