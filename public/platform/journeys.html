<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø±Ø­Ù„Ø§Øª | Ø±ÙØ¨Ø­</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/platform/shared/shell.css">
</head>
<body>

<div id="page-content">
    <!-- Page Header -->
    <div class="page-header flex justify-between items-center">
        <div>
            <h1 class="page-title">Ø§Ù„Ø±Ø­Ù„Ø§Øª</h1>
            <p class="page-subtitle">Ø±Ø­Ù„Ø§Øª Ø¹Ù…Ù„Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ© â€” Ù…Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ù„Ù„ÙˆÙ„Ø§Ø¡</p>
        </div>
        <button class="btn btn-primary" onclick="showCreateModal()">+ Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab active" data-filter="all">Ø§Ù„ÙƒÙ„ <span class="text-dim">(7)</span></button>
        <button class="tab" data-filter="active">Ù†Ø´Ø· <span class="text-dim">(3)</span></button>
        <button class="tab" data-filter="draft">Ù…Ø³ÙˆØ¯Ø© <span class="text-dim">(4)</span></button>
    </div>

    <!-- Journeys Grid -->
    <div class="journeys-grid" id="journeysGrid">
        <!-- Cart Recovery -->
        <div class="journey-card" data-status="active" data-type="cart_recovery">
            <div class="journey-card-header">
                <div class="journey-card-icon" style="background: var(--warning-subtle); color: var(--warning);">ğŸ›’</div>
                <span class="badge badge-success">Ù†Ø´Ø·</span>
            </div>
            <h3 class="journey-card-title">Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…ØªØ±ÙˆÙƒØ©</h3>
            <p class="journey-card-desc">Ø±Ø³Ø§Ø¦Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù„ÙŠ ØªØ±ÙƒÙˆØ§ Ø³Ù„Ø§ØªÙ‡Ù… â€” Ø®ØµÙˆÙ…Ø§Øª ØªØ¯Ø±ÙŠØ¬ÙŠØ© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ + SMS</p>
            <div class="journey-card-steps">
                <div class="step-dot active"></div>
                <div class="step-line"></div>
                <div class="step-dot active"></div>
                <div class="step-line"></div>
                <div class="step-dot active"></div>
                <span class="text-sm text-dim">3 Ø®Ø·ÙˆØ§Øª</span>
            </div>
            <div class="journey-card-metrics">
                <div class="metric">
                    <div class="metric-value">30%</div>
                    <div class="metric-label">Ø§Ø³ØªØ±Ø¯Ø§Ø¯</div>
                </div>
                <div class="metric">
                    <div class="metric-value">142</div>
                    <div class="metric-label">Ù…Ø±Ø³Ù„Ø©</div>
                </div>
                <div class="metric">
                    <div class="metric-value">98%</div>
                    <div class="metric-label">ØªØ³Ù„ÙŠÙ…</div>
                </div>
            </div>
            <div class="journey-card-footer">
                <span class="text-sm text-dim">ÙˆØ§ØªØ³Ø§Ø¨ + SMS</span>
                <button class="btn btn-ghost btn-sm" onclick="editJourney('cart_recovery')">ØªØ¹Ø¯ÙŠÙ„</button>
            </div>
        </div>

        <!-- Welcome -->
        <div class="journey-card" data-status="active" data-type="welcome">
            <div class="journey-card-header">
                <div class="journey-card-icon" style="background: var(--info-subtle); color: var(--info);">ğŸ‘‹</div>
                <span class="badge badge-success">Ù†Ø´Ø·</span>
            </div>
            <h3 class="journey-card-title">Ø±Ø­Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨</h3>
            <p class="journey-card-desc">ØªØ±Ø­ÙŠØ¨ Ø¨Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯ â€” Ù‡Ø¯ÙŠØ© ØªØ±Ø­ÙŠØ¨ÙŠØ© ÙˆØªØ¹Ø±ÙŠÙ Ø¨Ø§Ù„Ù…ØªØ¬Ø±</p>
            <div class="journey-card-steps">
                <div class="step-dot active"></div>
                <div class="step-line"></div>
                <div class="step-dot active"></div>
                <div class="step-line"></div>
                <div class="step-dot active"></div>
                <span class="text-sm text-dim">3 Ø®Ø·ÙˆØ§Øª</span>
            </div>
            <div class="journey-card-metrics">
                <div class="metric">
                    <div class="metric-value">85%</div>
                    <div class="metric-label">Ù‚Ø±Ø§Ø¡Ø©</div>
                </div>
                <div class="metric">
                    <div class="metric-value">67</div>
                    <div class="metric-label">Ù…Ø±Ø³Ù„Ø©</div>
                </div>
                <div class="metric">
                    <div class="metric-value">12%</div>
                    <div class="metric-label">ØªØ­ÙˆÙŠÙ„</div>
                </div>
            </div>
            <div class="journey-card-footer">
                <span class="text-sm text-dim">ÙˆØ§ØªØ³Ø§Ø¨ + SMS</span>
                <button class="btn btn-ghost btn-sm" onclick="editJourney('welcome')">ØªØ¹Ø¯ÙŠÙ„</button>
            </div>
        </div>

        <!-- Post Purchase -->
        <div class="journey-card" data-status="active" data-type="post_purchase">
            <div class="journey-card-header">
                <div class="journey-card-icon" style="background: var(--success-subtle); color: var(--success);">ğŸ“¦</div>
                <span class="badge badge-success">Ù†Ø´Ø·</span>
            </div>
            <h3 class="journey-card-title">Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡</h3>
            <p class="journey-card-desc">Ø´ÙƒØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ + Ø·Ù„Ø¨ ØªÙ‚ÙŠÙŠÙ… + ØªÙˆØµÙŠØ© Ù…Ù†ØªØ¬Ø§Øª Ù…Ø´Ø§Ø¨Ù‡Ø©</p>
            <div class="journey-card-steps">
                <div class="step-dot active"></div>
                <div class="step-line"></div>
                <div class="step-dot active"></div>
                <div class="step-line"></div>
                <div class="step-dot active"></div>
                <span class="text-sm text-dim">3 Ø®Ø·ÙˆØ§Øª</span>
            </div>
            <div class="journey-card-metrics">
                <div class="metric">
                    <div class="metric-value">92%</div>
                    <div class="metric-label">Ù‚Ø±Ø§Ø¡Ø©</div>
                </div>
                <div class="metric">
                    <div class="metric-value">89</div>
                    <div class="metric-label">Ù…Ø±Ø³Ù„Ø©</div>
                </div>
                <div class="metric">
                    <div class="metric-value">23%</div>
                    <div class="metric-label">ØªÙ‚ÙŠÙŠÙ…</div>
                </div>
            </div>
            <div class="journey-card-footer">
                <span class="text-sm text-dim">ÙˆØ§ØªØ³Ø§Ø¨</span>
                <button class="btn btn-ghost btn-sm" onclick="editJourney('post_purchase')">ØªØ¹Ø¯ÙŠÙ„</button>
            </div>
        </div>

        <!-- Winback -->
        <div class="journey-card" data-status="draft" data-type="winback">
            <div class="journey-card-header">
                <div class="journey-card-icon" style="background: var(--danger-subtle); color: var(--danger);">ğŸ’”</div>
                <span class="badge badge-warning">Ù…Ø³ÙˆØ¯Ø©</span>
            </div>
            <h3 class="journey-card-title">Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„ØºØ§Ø¦Ø¨ÙŠÙ†</h3>
            <p class="journey-card-desc">Ø¹Ù…Ù„Ø§Ø¡ Ù…Ø§ Ø§Ø´ØªØ±ÙˆØ§ Ù…Ù† 30+ ÙŠÙˆÙ… â€” Ø¹Ø±ÙˆØ¶ Ù…ØªØ¯Ø±Ø¬Ø© Ù„Ø¥Ø±Ø¬Ø§Ø¹Ù‡Ù…</p>
            <div class="journey-card-steps">
                <div class="step-dot"></div>
                <div class="step-line"></div>
                <div class="step-dot"></div>
                <div class="step-line"></div>
                <div class="step-dot"></div>
                <span class="text-sm text-dim">3 Ø®Ø·ÙˆØ§Øª</span>
            </div>
            <div class="journey-card-metrics">
                <div class="metric"><div class="metric-value">â€”</div><div class="metric-label">Ø§Ø³ØªØ±Ø¯Ø§Ø¯</div></div>
                <div class="metric"><div class="metric-value">0</div><div class="metric-label">Ù…Ø±Ø³Ù„Ø©</div></div>
                <div class="metric"><div class="metric-value">â€”</div><div class="metric-label">ØªØ­ÙˆÙŠÙ„</div></div>
            </div>
            <div class="journey-card-footer">
                <span class="text-sm text-dim">ÙˆØ§ØªØ³Ø§Ø¨ + SMS</span>
                <button class="btn btn-primary btn-sm" onclick="activateJourney('winback')">ØªÙØ¹ÙŠÙ„</button>
            </div>
        </div>

        <!-- Birthday -->
        <div class="journey-card" data-status="draft" data-type="birthday">
            <div class="journey-card-header">
                <div class="journey-card-icon" style="background: var(--primary-subtle); color: var(--primary);">ğŸ‚</div>
                <span class="badge badge-warning">Ù…Ø³ÙˆØ¯Ø©</span>
            </div>
            <h3 class="journey-card-title">ØªÙ‡Ù†Ø¦Ø© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯</h3>
            <p class="journey-card-desc">Ù‡Ø¯ÙŠØ© Ø®ØµÙ… Ù„Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø§Ù„Ø¹Ù…ÙŠÙ„ â€” ØªÙØ±Ø³Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</p>
            <div class="journey-card-steps">
                <div class="step-dot"></div>
                <div class="step-line"></div>
                <div class="step-dot"></div>
                <span class="text-sm text-dim">2 Ø®Ø·ÙˆØ§Øª</span>
            </div>
            <div class="journey-card-metrics">
                <div class="metric"><div class="metric-value">â€”</div><div class="metric-label">Ø§Ø³ØªØ±Ø¯Ø§Ø¯</div></div>
                <div class="metric"><div class="metric-value">0</div><div class="metric-label">Ù…Ø±Ø³Ù„Ø©</div></div>
                <div class="metric"><div class="metric-value">â€”</div><div class="metric-label">ØªØ­ÙˆÙŠÙ„</div></div>
            </div>
            <div class="journey-card-footer">
                <span class="text-sm text-dim">ÙˆØ§ØªØ³Ø§Ø¨ + SMS</span>
                <button class="btn btn-primary btn-sm" onclick="activateJourney('birthday')">ØªÙØ¹ÙŠÙ„</button>
            </div>
        </div>

        <!-- Browse Abandonment -->
        <div class="journey-card" data-status="draft" data-type="browse_abandonment">
            <div class="journey-card-header">
                <div class="journey-card-icon" style="background: rgba(139, 92, 246, 0.1); color: #8B5CF6;">ğŸ‘ï¸</div>
                <span class="badge badge-warning">Ù…Ø³ÙˆØ¯Ø©</span>
            </div>
            <h3 class="journey-card-title">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØµÙØ­</h3>
            <p class="journey-card-desc">Ø¹Ù…ÙŠÙ„ ØªØµÙØ­ Ù…Ù†ØªØ¬ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ÙŠØ¶ÙŠÙÙ‡ Ù„Ù„Ø³Ù„Ø© â€” ØªØ°ÙƒÙŠØ± Ø°ÙƒÙŠ</p>
            <div class="journey-card-steps">
                <div class="step-dot"></div>
                <div class="step-line"></div>
                <div class="step-dot"></div>
                <span class="text-sm text-dim">2 Ø®Ø·ÙˆØ§Øª</span>
            </div>
            <div class="journey-card-metrics">
                <div class="metric"><div class="metric-value">â€”</div><div class="metric-label">ØªØ­ÙˆÙŠÙ„</div></div>
                <div class="metric"><div class="metric-value">0</div><div class="metric-label">Ù…Ø±Ø³Ù„Ø©</div></div>
                <div class="metric"><div class="metric-value">â€”</div><div class="metric-label">Ù†Ù‚Ø±</div></div>
            </div>
            <div class="journey-card-footer">
                <span class="text-sm text-dim">ÙˆØ§ØªØ³Ø§Ø¨</span>
                <button class="btn btn-primary btn-sm" onclick="activateJourney('browse_abandonment')">ØªÙØ¹ÙŠÙ„</button>
            </div>
        </div>

        <!-- Back in Stock -->
        <div class="journey-card" data-status="draft" data-type="back_in_stock">
            <div class="journey-card-header">
                <div class="journey-card-icon" style="background: rgba(34, 211, 238, 0.1); color: #22D3EE;">ğŸ“¢</div>
                <span class="badge badge-neutral">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
            </div>
            <h3 class="journey-card-title">ØªÙ†Ø¨ÙŠÙ‡ Ø¹ÙˆØ¯Ø© Ø§Ù„Ù…Ù†ØªØ¬</h3>
            <p class="journey-card-desc">Ù…Ù†ØªØ¬ Ø±Ø¬Ø¹ Ø¨Ø§Ù„Ù…Ø®Ø²ÙˆÙ† â€” Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ù‡ØªÙ…ÙŠÙ†</p>
            <div class="journey-card-steps">
                <div class="step-dot"></div>
                <span class="text-sm text-dim">Ø®Ø·ÙˆØ© ÙˆØ§Ø­Ø¯Ø©</span>
            </div>
            <div class="journey-card-metrics">
                <div class="metric"><div class="metric-value">â€”</div><div class="metric-label">â€”</div></div>
                <div class="metric"><div class="metric-value">â€”</div><div class="metric-label">â€”</div></div>
                <div class="metric"><div class="metric-value">â€”</div><div class="metric-label">â€”</div></div>
            </div>
            <div class="journey-card-footer">
                <span class="text-sm text-dim">ÙˆØ§ØªØ³Ø§Ø¨</span>
                <span class="text-sm text-dim">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
            </div>
        </div>
    </div>
</div>

<style>
    .journeys-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
    }

    .journey-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius-lg);
        padding: 24px;
        transition: all 0.2s;
        display: flex;
        flex-direction: column;
    }
    .journey-card:hover {
        border-color: var(--border-hover);
        transform: translateY(-2px);
    }

    .journey-card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 14px;
    }
    .journey-card-icon {
        width: 44px;
        height: 44px;
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
    }
    .journey-card-title {
        font-size: 16px;
        font-weight: 700;
        margin-bottom: 6px;
    }
    .journey-card-desc {
        font-size: 13px;
        color: var(--text-dim);
        line-height: 1.6;
        margin-bottom: 16px;
        flex: 1;
    }

    .journey-card-steps {
        display: flex;
        align-items: center;
        gap: 4px;
        margin-bottom: 16px;
    }
    .step-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--bg-hover);
        border: 2px solid var(--border);
    }
    .step-dot.active {
        background: var(--primary);
        border-color: var(--primary);
    }
    .step-line {
        width: 20px;
        height: 2px;
        background: var(--border);
    }

    .journey-card-metrics {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
        padding: 14px 0;
        border-top: 1px solid var(--border);
        border-bottom: 1px solid var(--border);
        margin-bottom: 14px;
    }
    .metric { text-align: center; }
    .metric-value { font-size: 16px; font-weight: 700; }
    .metric-label { font-size: 11px; color: var(--text-faint); margin-top: 2px; }

    .journey-card-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    @media (max-width: 1024px) { .journeys-grid { grid-template-columns: 1fr 1fr; } }
    @media (max-width: 640px) { .journeys-grid { grid-template-columns: 1fr; } }
</style>

<script src="/platform/shared/shell.js"></script>
<script>
    // Tab filtering
    document.querySelectorAll('.tab').forEach(function(tab) {
        tab.addEventListener('click', function() {
            document.querySelectorAll('.tab').forEach(function(t) { t.classList.remove('active'); });
            this.classList.add('active');
            var filter = this.dataset.filter;
            document.querySelectorAll('.journey-card').forEach(function(card) {
                if (filter === 'all' || card.dataset.status === filter) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        });
    });

    function editJourney(type) {
        window.location.href = '/platform/journey-editor.html?type=' + type;
    }

    function activateJourney(type) {
        if (confirm('ØªÙØ¹ÙŠÙ„ Ø±Ø­Ù„Ø© ' + type + 'ØŸ')) {
            RibhShell.api('/api/sequences/activate', {
                method: 'POST',
                body: { type: type }
            }).then(function() {
                location.reload();
            }).catch(function() {
                alert('ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„');
                location.reload();
            });
        }
    }

    function showCreateModal() {
        alert('Ù‚Ø±ÙŠØ¨Ø§Ù‹: Ù…Ù†Ø´Ø¦ Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù…Ø±Ø¦ÙŠ');
    }
</script>

</body>
</html>
